{"ast":null,"code":"import _regeneratorRuntime from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/samet/myproject/myproject/ibet-web/src/components/email_sent.js\";\nimport React, { Component } from 'react';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport { NavLink } from 'react-router-dom';\nimport { config } from '../util_config';\nimport axios from 'axios'; // Material design\n\nimport { withStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport IconButton from '@material-ui/core/IconButton';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport Button from '@material-ui/core/Button';\nimport blue from '@material-ui/core/colors/blue';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport classNames from 'classnames';\nimport TopNavbar from \"./top_navbar\";\nimport '../css/email_sent.css';\nimport Axios from 'axios';\nvar API_URL = process.env.REACT_APP_REST_API;\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    margin: {\n      margin: 'auto'\n    },\n    textField: {\n      flexBasis: 200,\n      width: 50,\n      height: 50\n    },\n    cssRoot: {\n      color: theme.palette.getContrastText(blue[300]),\n      backgroundColor: blue[300],\n      '&:hover': {\n        backgroundColor: blue[800]\n      }\n    }\n  };\n};\n\nvar Email_Sent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Email_Sent, _Component);\n\n  function Email_Sent(props) {\n    var _this;\n\n    _classCallCheck(this, Email_Sent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Email_Sent).call(this, props));\n    _this.state = {\n      code_1: '',\n      code_2: '',\n      code_3: '',\n      code_4: '',\n      button_disable: true,\n      error: false\n    };\n    _this.handle_code_1 = _this.handle_code_1.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handle_code_2 = _this.handle_code_2.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handle_code_3 = _this.handle_code_3.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handle_code_4 = _this.handle_code_4.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.check_valid = _this.check_valid.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onFormSubmit = _this.onFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Email_Sent, [{\n    key: \"handle_code_1\",\n    value: function () {\n      var _handle_code_ = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(!event.target.value || event.target.value.match(/^[0-9]+$/) && event.target.value.length < 2)) {\n                  _context.next = 3;\n                  break;\n                }\n\n                _context.next = 3;\n                return this.setState({\n                  code_1: event.target.value\n                });\n\n              case 3:\n                this.check_valid();\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function handle_code_1(_x) {\n        return _handle_code_.apply(this, arguments);\n      }\n\n      return handle_code_1;\n    }()\n  }, {\n    key: \"handle_code_2\",\n    value: function () {\n      var _handle_code_2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(event) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(!event.target.value || event.target.value.match(/^[0-9]+$/) && event.target.value.length < 2)) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                _context2.next = 3;\n                return this.setState({\n                  code_2: event.target.value\n                });\n\n              case 3:\n                this.check_valid();\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handle_code_2(_x2) {\n        return _handle_code_2.apply(this, arguments);\n      }\n\n      return handle_code_2;\n    }()\n  }, {\n    key: \"handle_code_3\",\n    value: function () {\n      var _handle_code_3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(event) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(!event.target.value || event.target.value.match(/^[0-9]+$/) && event.target.value.length < 2)) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                _context3.next = 3;\n                return this.setState({\n                  code_3: event.target.value\n                });\n\n              case 3:\n                this.check_valid();\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function handle_code_3(_x3) {\n        return _handle_code_3.apply(this, arguments);\n      }\n\n      return handle_code_3;\n    }()\n  }, {\n    key: \"handle_code_4\",\n    value: function () {\n      var _handle_code_4 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(event) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(!event.target.value || event.target.value.match(/^[0-9]+$/) && event.target.value.length < 2)) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                _context4.next = 3;\n                return this.setState({\n                  code_4: event.target.value\n                });\n\n              case 3:\n                this.check_valid();\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function handle_code_4(_x4) {\n        return _handle_code_4.apply(this, arguments);\n      }\n\n      return handle_code_4;\n    }()\n  }, {\n    key: \"check_valid\",\n    value: function check_valid() {\n      if (this.state.code_1 && this.state.code_2 && this.state.code_3 && this.state.code_4) {\n        this.setState({\n          button_disable: false\n        });\n      } else {\n        this.setState({\n          button_disable: true\n        });\n      }\n    }\n  }, {\n    key: \"onFormSubmit\",\n    value: function onFormSubmit(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n      var code = this.state.code_1 + this.state.code_2 + this.state.code_3 + this.state.code_4;\n      axios.post(API_URL + \"users/api/verifyresetpasswordcode/\", {\n        email: this.props.match.params.email,\n        code: code\n      }, config).then(function (res) {\n        if (res.data === 'Success') {\n          _this2.props.history.push(\"/reset_password/\".concat(_this2.props.match.params.email));\n        } else {\n          _this2.setState({\n            error: true\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var email = this.props.match.params.email;\n      var classes = this.props.classes;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(TopNavbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"email-sent-form \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"email_sent.topmessage\",\n        defaultMessage: \"We sent to a code to reset you password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"email_sent.sentto\",\n        defaultMessage: \"Sent to\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \" \", email, \" \"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"email_sent.resend\",\n        defaultMessage: \"Try resending the email if you haven't received in five minutes\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"email_sent.verify\",\n        defaultMessage: \"Verification Code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        onSubmit: this.onFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"outlined-adornment-password\",\n        className: classNames(classes.margin, classes.textField),\n        variant: \"outlined\",\n        type: 'text',\n        value: this.state.code_1,\n        onChange: this.handle_code_1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"outlined-adornment-password\",\n        className: classNames(classes.margin, classes.textField),\n        variant: \"outlined\",\n        type: 'text',\n        value: this.state.code_2,\n        onChange: this.handle_code_2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"outlined-adornment-password\",\n        className: classNames(classes.margin, classes.textField),\n        variant: \"outlined\",\n        type: 'text',\n        value: this.state.code_3,\n        onChange: this.handle_code_3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"outlined-adornment-password\",\n        className: classNames(classes.margin, classes.textField),\n        variant: \"outlined\",\n        type: 'text',\n        value: this.state.code_4,\n        onChange: this.handle_code_4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        disabled: this.state.button_disable,\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"forget_password.confirm\",\n        defaultMessage: \"Confirm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"pointer\",\n        style: {\n          color: 'blue'\n        },\n        onClick: function onClick() {\n          axios.post(API_URL + \"users/api/generatepasswordcode/\", {\n            email: email\n          }, config).then(function (res) {\n            if (res.data === 'Success') {\n              axios.post(API_URL + \"users/api/sendresetpasswordcode/\", {\n                email: email\n              }, config).then(function (res) {\n                var formatMessage = _this3.props.intl.formatMessage;\n                var message = formatMessage({\n                  id: \"email_sent.resendsuccess\"\n                });\n                alert(message);\n              });\n            }\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"reset_password.resend\",\n        defaultMessage: \"Resend email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, this.state.error && React.createElement(FormattedMessage, {\n        id: \"email_sent.error\",\n        defaultMessage: \"The verification code is not correct or it is outdated, try resending email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Email_Sent;\n}(Component);\n\nexport default withStyles(styles)(injectIntl(Email_Sent));","map":{"version":3,"sources":["/Users/samet/myproject/myproject/ibet-web/src/components/email_sent.js"],"names":["React","Component","FormattedMessage","injectIntl","NavLink","config","axios","withStyles","TextField","InputAdornment","IconButton","Visibility","VisibilityOff","Button","blue","FormControlLabel","Checkbox","classNames","TopNavbar","Axios","API_URL","process","env","REACT_APP_REST_API","styles","theme","root","display","flexWrap","margin","textField","flexBasis","width","height","cssRoot","color","palette","getContrastText","backgroundColor","Email_Sent","props","state","code_1","code_2","code_3","code_4","button_disable","error","handle_code_1","bind","handle_code_2","handle_code_3","handle_code_4","check_valid","onFormSubmit","event","target","value","match","length","setState","preventDefault","code","post","email","params","then","res","data","history","push","classes","formatMessage","intl","message","id","alert"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport { NavLink } from 'react-router-dom';\nimport { config } from '../util_config';\nimport axios from 'axios';\n\n\n// Material design\nimport { withStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport IconButton from '@material-ui/core/IconButton';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport Button from '@material-ui/core/Button';\nimport blue from '@material-ui/core/colors/blue';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport classNames from 'classnames';\n\nimport TopNavbar from \"./top_navbar\";\n\n\nimport '../css/email_sent.css';\nimport Axios from 'axios';\n\nconst API_URL = process.env.REACT_APP_REST_API;\n\n\nconst styles = theme => ({\n    root: {\n      display: 'flex',\n      flexWrap: 'wrap',\n    },\n\n    margin: {\n      margin: 'auto',\n    },\n\n    textField: {\n      flexBasis: 200,\n      width: 50,\n      height: 50\n    },\n\n    cssRoot: {\n        color: theme.palette.getContrastText(blue[300]),\n        backgroundColor: blue[300],\n        '&:hover': {\n          backgroundColor: blue[800],\n        },\n      },\n  });\n\n\nclass Email_Sent extends Component {\n\n    constructor(props){\n        super(props);\n\n        this.state = {\n           code_1: '',\n           code_2: '',\n           code_3: '',\n           code_4: '',\n           button_disable: true,\n           error: false\n        }\n\n        this.handle_code_1 = this.handle_code_1.bind(this);\n        this.handle_code_2 = this.handle_code_2.bind(this);\n        this.handle_code_3 = this.handle_code_3.bind(this);\n        this.handle_code_4 = this.handle_code_4.bind(this);\n        this.check_valid   = this.check_valid.bind(this);\n        this.onFormSubmit  = this.onFormSubmit.bind(this);\n    }\n\n    async handle_code_1(event){\n        if(!event.target.value || (event.target.value.match(/^[0-9]+$/) && event.target.value.length < 2)){\n            await this.setState({code_1: event.target.value})\n        }\n        this.check_valid();\n    }\n\n    async handle_code_2(event){\n        if(!event.target.value ||  (event.target.value.match(/^[0-9]+$/) && event.target.value.length < 2)){\n           await  this.setState({code_2: event.target.value})\n        }\n        this.check_valid();\n    }\n\n    async handle_code_3(event){\n        if(!event.target.value ||  (event.target.value.match(/^[0-9]+$/) && event.target.value.length < 2)){\n            await this.setState({code_3: event.target.value})\n        }\n        this.check_valid();\n    }\n\n    async handle_code_4(event){\n        if(!event.target.value ||  (event.target.value.match(/^[0-9]+$/) && event.target.value.length < 2)){\n            await this.setState({code_4: event.target.value})\n        }\n        this.check_valid();\n    }\n\n    check_valid(){\n        if (this.state.code_1 && this.state.code_2 && this.state.code_3 && this.state.code_4){\n            this.setState({button_disable: false})\n        }else{\n            this.setState({button_disable: true})\n        }\n    }\n\n    onFormSubmit(event){\n        event.preventDefault();\n        \n        const code = this.state.code_1 + this.state.code_2 + this.state.code_3  + this.state.code_4 \n\n        axios.post(API_URL + `users/api/verifyresetpasswordcode/`,{\n            email: this.props.match.params.email,\n            code: code\n        }, config)\n        .then(res => {\n          if (res.data === 'Success'){\n               this.props.history.push(`/reset_password/${this.props.match.params.email}`)\n          }else{\n               this.setState({error: true})\n          }\n        })\n    }\n\n    render(){\n\n        const { email } = this.props.match.params;\n\n        const { classes } = this.props;\n\n        return (\n            <div> \n\n                <TopNavbar />\n\n                <div className='email-sent-form '> \n                    <div>\n                        <b> \n                            <FormattedMessage id=\"email_sent.topmessage\" defaultMessage='We sent to a code to reset you password' />\n                        </b>\n                    </div>\n\n                    <br/>\n\n                    <div> \n                        <FormattedMessage id=\"email_sent.sentto\" defaultMessage='Sent to' />\n                    </div>\n                    \n                    <div> { email } </div>\n                    \n                    <br/>\n\n                    <div> \n                        <FormattedMessage id=\"email_sent.resend\" defaultMessage=\"Try resending the email if you haven't received in five minutes\" />\n                    </div>\n                    \n                    <br/>\n                    \n                    <div> \n                        <FormattedMessage id=\"email_sent.verify\" defaultMessage='Verification Code' />\n                    </div>\n                    \n                    <br/>\n\n                    <form onSubmit={this.onFormSubmit} >\n\n                        <TextField\n                            id=\"outlined-adornment-password\"\n                            className={classNames(classes.margin, classes.textField)}\n                            variant=\"outlined\"\n                            type={'text'}\n                            value={this.state.code_1}\n                            onChange={this.handle_code_1}\n                        />\n\n                        <TextField\n                            id=\"outlined-adornment-password\"\n                            className={classNames(classes.margin, classes.textField)}\n                            variant=\"outlined\"\n                            type={'text'}\n                            value={this.state.code_2}\n                            onChange={this.handle_code_2}\n                        />\n\n                        <TextField\n                            id=\"outlined-adornment-password\"\n                            className={classNames(classes.margin, classes.textField)}\n                            variant=\"outlined\"\n                            type={'text'}\n                            value={this.state.code_3}\n                            onChange={this.handle_code_3}\n                        />\n\n                        <TextField\n                            id=\"outlined-adornment-password\"\n                            className={classNames(classes.margin, classes.textField)}\n                            variant=\"outlined\"\n                            type={'text'}\n                            value={this.state.code_4}\n                            onChange={this.handle_code_4}\n                        />\n\n                        <br />\n                        <br />\n\n                        <Button \n                            variant=\"contained\"\n                            color=\"primary\"\n                            disabled = {this.state.button_disable} \n                            type=\"submit\" \n                        > \n                    \n                            <FormattedMessage id=\"forget_password.confirm\" defaultMessage='Confirm' />\n                        </Button>\n                    </form>\n\n                    <br/>\n\n                    <div \n                    className='pointer'\n                    style={{\n                        color: 'blue',\n                    }}\n                    onClick={() => {\n                        axios.post(API_URL + `users/api/generatepasswordcode/`, {email: email},config)\n                        .then(res => {\n                            if (res.data === 'Success'){\n                                axios.post(API_URL + `users/api/sendresetpasswordcode/`,{email: email}, config)\n                                .then(res => {\n                                    const { formatMessage } = this.props.intl;\n                                    const message = formatMessage({ id: \"email_sent.resendsuccess\" });\n                                    alert(message)\n                                })\n                            }\n                        })\n                    }}>\n                        <FormattedMessage id=\"reset_password.resend\" defaultMessage='Resend email' />\n                    </div>\n\n                    <div style={{color: 'red'}}>\n                        {\n                            this.state.error && <FormattedMessage id=\"email_sent.error\" defaultMessage='The verification code is not correct or it is outdated, try resending email' />\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default withStyles(styles)(injectIntl(Email_Sent));"]},"metadata":{},"sourceType":"module"}