{"ast":null,"code":"import _classCallCheck from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/samet/myproject/myproject/ibet-web/src/components/profile.js\";\nimport React, { Component } from 'react';\nimport { authCheckState, AUTH_RESULT_FAIL } from '../actions';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { NavLink } from 'react-router-dom';\nimport { FormattedMessage } from 'react-intl';\nimport { config } from '../util_config'; //const API_URL = process.env.REACT_APP_REST_API;\n\nvar API_URL = 'http://52.9.147.67:8080/';\nvar HOST_URL = process.env.REACT_APP_LOCAL_API;\n\nvar Profile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Profile, _Component);\n\n  function Profile() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Profile)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data: {},\n      tree: '',\n      level: ''\n    };\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.props.authCheckState().then(function (res) {\n        if (res === AUTH_RESULT_FAIL) {\n          _this2.props.history.push('/');\n        } else {\n          var token = localStorage.getItem('token');\n          config.headers[\"Authorization\"] = \"Token \".concat(token);\n          return axios.get(API_URL + 'users/api/user/', config).then(function (res) {\n            _this2.setState({\n              data: res.data\n            });\n\n            axios.get(API_URL + 'users/api/referraltree/?username=' + _this2.state.data.username, config).then(function (res) {\n              _this2.setState({\n                tree: res.data\n              });\n            });\n            axios.get(API_URL + 'users/api/config/', config).then(function (res) {\n              _this2.setState({\n                level: res.data\n              });\n            });\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var level = this.state.level;\n      var layer = this.state.tree.toString();\n      var array = [];\n\n      for (var i = 0; i < layer.length; i++) {\n        array.push(layer[i]);\n      }\n\n      var referral = function referral(array) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, array.map(function (item, index) {\n          if (index < level) {\n            return React.createElement(\"div\", {\n              key: index,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 65\n              },\n              __self: this\n            }, \" \", React.createElement(FormattedMessage, {\n              id: \"profile.level\",\n              defaultMessage: \"Referral Level: \",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 65\n              },\n              __self: this\n            }), \" \", index + 1, \": \", item ? item : 0, \" \");\n          }\n        }));\n      };\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \" \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.username\",\n        defaultMessage: \"Username: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      })), \"  \", this.state.data.username, \" \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \" \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.email\",\n        defaultMessage: \"Email: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      })), \" \", this.state.data.email, \" \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \" \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.firstName\",\n        defaultMessage: \"First Name: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      })), \"  \", this.state.data.first_name, \"  \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \" \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.lastName\",\n        defaultMessage: \"Last Name: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      })), \"  \", this.state.data.last_name, \"  \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \" \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.phone\",\n        defaultMessage: \"Phone: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      })), \"  \", this.state.data.phone, \"  \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \" \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.dob\",\n        defaultMessage: \"Date of Birth: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      })), \"  \", this.state.data.date_of_birth, \"  \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \" \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.street1\",\n        defaultMessage: \"Street Address 1: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      })), \"  \", this.state.data.street_address_1, \"  \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \" \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.street2\",\n        defaultMessage: \"Street Address 2: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      })), \"  \", this.state.data.street_address_2, \"  \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \" \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.country\",\n        defaultMessage: \"Country: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      })), \"  \", this.state.data.country, \"  \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \" \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.city\",\n        defaultMessage: \"City: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      })), \"  \", this.state.data.city, \"  \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \" \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.zipcode\",\n        defaultMessage: \"Zipcode: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })), \"  \", this.state.data.zipcode, \"  \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \" \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.state\",\n        defaultMessage: \"State: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      })), \"  \", this.state.data.state, \"  \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.balance\",\n        defaultMessage: \"Current balance: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      })), this.state.data.balance, ' ', React.createElement(\"button\", {\n        className: \"btn btn-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/balance/add\",\n        style: {\n          textDecoration: 'none'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.add\",\n        defaultMessage: \"Add Balance\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }))), React.createElement(\"button\", {\n        className: \"btn btn-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/balance/withdraw\",\n        style: {\n          textDecoration: 'none'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.withdraw\",\n        defaultMessage: \"Withdraw Balance\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \" \", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.referral\",\n        defaultMessage: \"Referral link: \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      })), \"  \", HOST_URL + 'signup/' + this.state.data.referral_id, \"  \"), React.createElement(\"button\", {\n        className: \"btn btn-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/update_profile\",\n        style: {\n          textDecoration: 'none'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.update\",\n        defaultMessage: \"Update\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }))), React.createElement(\"button\", {\n        className: \"btn btn-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/\",\n        style: {\n          textDecoration: 'none'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.back\",\n        defaultMessage: \"Back\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      })))), referral(array));\n    }\n  }]);\n\n  return Profile;\n}(Component);\n\nexport default connect(null, {\n  authCheckState: authCheckState\n})(Profile);","map":{"version":3,"sources":["/Users/samet/myproject/myproject/ibet-web/src/components/profile.js"],"names":["React","Component","authCheckState","AUTH_RESULT_FAIL","connect","axios","NavLink","FormattedMessage","config","API_URL","HOST_URL","process","env","REACT_APP_LOCAL_API","Profile","state","data","tree","level","props","then","res","history","push","token","localStorage","getItem","headers","get","setState","username","layer","toString","array","i","length","referral","map","item","index","email","first_name","last_name","phone","date_of_birth","street_address_1","street_address_2","country","city","zipcode","balance","textDecoration","referral_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { authCheckState, AUTH_RESULT_FAIL } from '../actions';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { NavLink} from 'react-router-dom';\nimport { FormattedMessage } from 'react-intl';\nimport { config } from '../util_config';\n\n//const API_URL = process.env.REACT_APP_REST_API;\nconst API_URL = 'http://52.9.147.67:8080/';\n\nconst HOST_URL = process.env.REACT_APP_LOCAL_API;\n\n\nclass Profile extends Component {\n\n    state = {\n        data: {},\n        tree:'',\n        level: ''\n    }\n\n    componentDidMount() {\n      this.props.authCheckState()\n      .then(res => {\n        if (res === AUTH_RESULT_FAIL) {\n          this.props.history.push('/'); \n        } else {\n          const token = localStorage.getItem('token');\n          config.headers[\"Authorization\"] = `Token ${token}`;\n\n          return axios.get(API_URL + 'users/api/user/', config)\n          .then(res => {\n              this.setState({data: res.data});\n\n              axios.get(API_URL + 'users/api/referraltree/?username=' + this.state.data.username, config)\n              .then(res => {\n                this.setState({tree: res.data})\n              })\n\n              axios.get(API_URL + 'users/api/config/', config)\n              .then(res => {\n                this.setState({level: res.data})\n              })\n          }) \n        }\n      });\n    }\n\n\n    render(){\n      var level = this.state.level\n      var layer = this.state.tree.toString()\n      var array = []\n      for (var i = 0; i < layer.length; i++){\n          array.push(layer[i])\n      }\n\n      var referral = (array) => {\n        return (\n          <div>\n            {\n              array.map((item, index) => {\n                  if (index < level){\n                    return <div key={index}> <FormattedMessage id=\"profile.level\" defaultMessage='Referral Level: ' /> {index + 1}: {item ? item : 0} </div>\n                  }\n              })\n            }\n          </div>\n        )\n      }\n      \n      return (\n        <div>\n        {\n          <div>\n            <div> <b>\n            <FormattedMessage id=\"profile.username\" defaultMessage='Username: ' />\n              </b>  {this.state.data.username} </div>\n            <div> <b>\n            <FormattedMessage id=\"profile.email\" defaultMessage='Email: ' />\n              </b> {this.state.data.email} </div>\n            <div> <b>\n            <FormattedMessage id=\"profile.firstName\" defaultMessage='First Name: ' />\n              </b>  {this.state.data.first_name}  </div>\n            <div> <b>\n            <FormattedMessage id=\"profile.lastName\" defaultMessage='Last Name: ' />\n            </b>  {this.state.data.last_name}  </div>\n            <div> <b>\n            <FormattedMessage id=\"profile.phone\" defaultMessage='Phone: ' />\n            </b>  {this.state.data.phone}  </div>\n            <div> <b>\n            <FormattedMessage id=\"profile.dob\" defaultMessage='Date of Birth: ' />\n            </b>  {this.state.data.date_of_birth}  </div>\n            <div> <b>\n            <FormattedMessage id=\"profile.street1\" defaultMessage='Street Address 1: ' />\n            </b>  {this.state.data.street_address_1}  </div>\n            <div> <b>\n            <FormattedMessage id=\"profile.street2\" defaultMessage='Street Address 2: ' />\n            </b>  {this.state.data.street_address_2}  </div>\n            <div> <b>\n            <FormattedMessage id=\"profile.country\" defaultMessage='Country: ' />\n            </b>  {this.state.data.country}  </div>\n            <div> <b>\n            <FormattedMessage id=\"profile.city\" defaultMessage='City: ' />\n            </b>  {this.state.data.city}  </div>\n            <div> <b>\n            <FormattedMessage id=\"profile.zipcode\" defaultMessage='Zipcode: ' />\n            </b>  {this.state.data.zipcode}  </div>\n            <div> <b>\n            <FormattedMessage id=\"profile.state\" defaultMessage='State: ' />\n            </b>  {this.state.data.state}  </div>\n            <div>\n              <b>\n                <FormattedMessage id=\"profile.balance\" defaultMessage='Current balance: ' /> \n              </b> \n              {this.state.data.balance} \n              {' '}\n              <button className=\"btn btn-secondary\"> \n                <NavLink to='/balance/add' style={{ textDecoration: 'none' }}><FormattedMessage id=\"profile.add\" defaultMessage='Add Balance' /></NavLink> \n              </button>\n              <button className=\"btn btn-secondary\"> \n                <NavLink to='/balance/withdraw' style={{ textDecoration: 'none' }}><FormattedMessage id=\"profile.withdraw\" defaultMessage='Withdraw Balance' /></NavLink> \n              </button>\n            </div>\n            <div> <b>\n            <FormattedMessage id=\"profile.referral\" defaultMessage='Referral link: ' />\n            </b>  {HOST_URL + 'signup/'+ this.state.data.referral_id}  </div>\n            \n            <button className=\"btn btn-secondary\"> \n                <NavLink to='/update_profile' style={{ textDecoration: 'none' }}><FormattedMessage id=\"profile.update\" defaultMessage='Update' /></NavLink> \n            </button>\n            <button className=\"btn btn-secondary\"> \n                <NavLink to='/' style={{ textDecoration: 'none' }}><FormattedMessage id=\"profile.back\" defaultMessage='Back' /></NavLink> \n            </button>\n          </div>\n        } \n        { \n          referral(array) \n        }\n        </div>\n      )\n    }\n}\n\nexport default connect(null, {authCheckState})(Profile);\n"]},"metadata":{},"sourceType":"module"}