{"ast":null,"code":"import _classCallCheck from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/samet/myproject/myproject/ibet-web/src/components/referral.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { config } from '../util_config';\nimport { NavLink } from 'react-router-dom';\nimport { FormattedMessage, injectIntl } from 'react-intl'; //const API_URL = process.env.REACT_APP_REST_API;\n\nvar API_URL = 'http://52.9.147.67:8080/';\n\nvar Referral =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Referral, _React$Component);\n\n  function Referral(props) {\n    var _this;\n\n    _classCallCheck(this, Referral);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Referral).call(this, props));\n    _this.state = {\n      data: '',\n      email: '',\n      error: false,\n      email_exist_error: false,\n      button_disable: true,\n      email_valid_error: false\n    };\n    _this.onInputChange_email = _this.onInputChange_email.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onFormSubmit = _this.onFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Referral, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var token = localStorage.getItem('token');\n      config.headers[\"Authorization\"] = \"Token \".concat(token);\n      axios.get(API_URL + 'users/api/user/', config).then(function (res) {\n        _this2.setState({\n          data: res.data\n        });\n      });\n    }\n  }, {\n    key: \"onInputChange_email\",\n    value: function onInputChange_email(event) {\n      var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n      if (!event.target.value.match(re)) {\n        this.setState({\n          email_valid_error: true,\n          button_disable: true\n        });\n      } else if (event.target.value === this.state.data.email) {\n        this.setState({\n          email_exist_error: true,\n          button_disable: true\n        });\n      } else {\n        this.setState({\n          email_valid_error: false,\n          email_exist_error: false,\n          button_disable: false\n        });\n      }\n\n      this.setState({\n        email: event.target.value\n      });\n    }\n  }, {\n    key: \"onFormSubmit\",\n    value: function onFormSubmit(event) {\n      var _this3 = this;\n\n      var formatMessage = this.props.intl.formatMessage;\n      var message = formatMessage({\n        id: 'referral.user'\n      });\n      event.preventDefault();\n      axios.get(API_URL + \"users/api/checkreferral?referral_id=\".concat(this.state.data.referral_id, \"&email=\").concat(this.state.email), config).then(function (res) {\n        if (res.data === 'Duplicate') {\n          _this3.setState({\n            email_exist_error: true\n          });\n        } else if (res.data === 'Valid') {\n          axios.get(API_URL + \"users/api/sendemail/?case=referral&to_email_address=\".concat(_this3.state.email, \"&username=\").concat(_this3.state.data.username, \"&referralid=\").concat(_this3.state.data.referral_id), config).then(function (res) {\n            alert(message);\n\n            _this3.props.history.push('/');\n          }).catch(function (err) {\n            console.log(err.response);\n          });\n        } else {\n          _this3.setState({\n            error: true\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.onFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"referral.enter_email\",\n        defaultMessage: \"Please enter the email account for your referral\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      })))), React.createElement(\"input\", {\n        placeholder: \"example@gmail.com\",\n        className: \"form-control\",\n        value: this.state.email,\n        onChange: this.onInputChange_email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      })), React.createElement(\"span\", {\n        className: \"input-group-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        disabled: this.state.button_disable,\n        type: \"submit\",\n        className: \"btn btn-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"balance.submit\",\n        defaultMessage: \"Submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      })))), React.createElement(\"button\", {\n        className: \"btn btn-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/\",\n        style: {\n          textDecoration: 'none'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.back\",\n        defaultMessage: \"Back\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), this.state.error && React.createElement(FormattedMessage, {\n        id: \"referral.error\",\n        defaultMessage: \"You have reached the maximum referral number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), this.state.email_valid_error && React.createElement(\"div\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \" \", React.createElement(FormattedMessage, {\n        id: \"referral.email_valid\",\n        defaultMessage: \"Please enter a valid email address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }), \" \"), this.state.email_exist_error && React.createElement(\"div\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \" \", React.createElement(FormattedMessage, {\n        id: \"referral.email_exist\",\n        defaultMessage: \"This email has already been registerd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), \" \"));\n    }\n  }]);\n\n  return Referral;\n}(React.Component);\n\nexport default injectIntl(Referral);","map":{"version":3,"sources":["/Users/samet/myproject/myproject/ibet-web/src/components/referral.js"],"names":["React","axios","config","NavLink","FormattedMessage","injectIntl","API_URL","Referral","props","state","data","email","error","email_exist_error","button_disable","email_valid_error","onInputChange_email","bind","onFormSubmit","token","localStorage","getItem","headers","get","then","res","setState","event","re","target","value","match","formatMessage","intl","message","id","preventDefault","referral_id","username","alert","history","push","catch","err","console","log","response","textDecoration","color","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { config } from '../util_config';\nimport { NavLink } from 'react-router-dom';\nimport { FormattedMessage, injectIntl } from 'react-intl';\n\n//const API_URL = process.env.REACT_APP_REST_API;\nconst API_URL = 'http://52.9.147.67:8080/';\n\nclass Referral extends React.Component {\n    constructor(props){\n        super(props);\n    \n        this.state = {\n          data: '',\n          email: '',\n          error: false,\n          email_exist_error: false,\n          button_disable: true,\n          email_valid_error: false\n        };\n\n        this.onInputChange_email            = this.onInputChange_email.bind(this);\n        this.onFormSubmit                   = this.onFormSubmit.bind(this);\n    }\n\n    componentDidMount() {\n        const token = localStorage.getItem('token');\n          config.headers[\"Authorization\"] = `Token ${token}`;\n\n          axios.get(API_URL + 'users/api/user/', config)\n          .then(res => {\n              this.setState({data: res.data});\n        }) \n    }\n\n    onInputChange_email(event){\n        var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        if (!event.target.value.match(re)  ){\n            this.setState({email_valid_error: true, button_disable: true});\n        }else if(event.target.value === this.state.data.email){\n            this.setState({email_exist_error: true, button_disable: true});\n        }else{\n            this.setState({email_valid_error: false, email_exist_error: false, button_disable: false});\n        }\n        this.setState({ email: event.target.value });\n    }\n\n    onFormSubmit(event){\n        const { formatMessage } = this.props.intl;\n        const message = formatMessage({ id: 'referral.user' });\n\n        event.preventDefault();\n        axios.get(API_URL + `users/api/checkreferral?referral_id=${this.state.data.referral_id}&email=${this.state.email}`, config)\n        .then(res =>{\n            if (res.data === 'Duplicate'){\n                this.setState({email_exist_error: true})\n            }else if (res.data === 'Valid'){\n                axios.get(API_URL + `users/api/sendemail/?case=referral&to_email_address=${this.state.email}&username=${this.state.data.username}&referralid=${this.state.data.referral_id}`, config)\n                .then(res =>{\n                    alert(message)\n                    this.props.history.push('/');\n                }).catch(err => {\n                    console.log(err.response)\n                })\n            }else{\n                this.setState({error: true})\n            }\n        })\n    }\n\n    render(){\n        return (\n            <div> \n                <form onSubmit={this.onFormSubmit} >\n                    <div>\n                        <div>\n                            <label><b>\n                                <FormattedMessage id='referral.enter_email' defaultMessage='Please enter the email account for your referral' />\n                            </b></label>\n                        </div>\n                            <input\n                                placeholder=\"example@gmail.com\"\n                                className=\"form-control\"\n                                value={this.state.email}\n                                onChange={this.onInputChange_email}\n                            />\n                    </div>\n\n                    <span className=\"input-group-btn\">\n                        <button disabled = {this.state.button_disable} type=\"submit\" className=\"btn btn-secondary\"> \n                            <FormattedMessage id=\"balance.submit\" defaultMessage='Submit' />   \n                        </button>\n                    </span>          \n\n                </form>\n\n                <button className=\"btn btn-secondary\"> \n                    <NavLink to='/' style={{ textDecoration: 'none' }}><FormattedMessage id=\"profile.back\" defaultMessage='Back' /></NavLink> \n                </button>\n\n                <br/>\n\n                {\n                    this.state.error && <FormattedMessage id=\"referral.error\" defaultMessage='You have reached the maximum referral number' />\n                }\n\n                {\n                    this.state.email_valid_error && <div style={{color: 'red'}}> <FormattedMessage id=\"referral.email_valid\" defaultMessage='Please enter a valid email address' /> </div>\n                }\n\n                {\n                    this.state.email_exist_error && <div style={{color: 'red'}}> <FormattedMessage id=\"referral.email_exist\" defaultMessage='This email has already been registerd' /> </div>\n                }\n\n            </div>\n        )\n    }\n}\n\nexport default injectIntl(Referral);\n"]},"metadata":{},"sourceType":"module"}