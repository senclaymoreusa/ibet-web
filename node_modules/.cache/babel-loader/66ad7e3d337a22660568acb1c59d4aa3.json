{"ast":null,"code":"import _classCallCheck from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/samet/myproject/myproject/ibet-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/samet/myproject/myproject/ibet-web/src/components/balance.js\";\nimport React, { Component } from 'react';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport { NavLink } from 'react-router-dom';\nimport axios from 'axios';\nimport { config } from '../util_config';\nimport { connect } from 'react-redux';\nvar API_URL = process.env.REACT_APP_REST_API;\n\nvar Balance =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Balance, _Component);\n\n  function Balance(props) {\n    var _this;\n\n    _classCallCheck(this, Balance);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Balance).call(this, props));\n    _this.state = {\n      balance: '',\n      error: false,\n      data: '',\n      type: ''\n    };\n    _this.onInputChange_balance = _this.onInputChange_balance.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onFormSubmit = _this.onFormSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Balance, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var token = localStorage.getItem('token');\n      config.headers[\"Authorization\"] = \"Token \".concat(token);\n      axios.get(API_URL + 'users/api/user/', config).then(function (res) {\n        _this2.setState({\n          data: res.data\n        });\n      });\n      var type = this.props.match.params.type;\n      this.setState({\n        type: type\n      });\n    }\n  }, {\n    key: \"onInputChange_balance\",\n    value: function onInputChange_balance(event) {\n      this.setState({\n        balance: event.target.value\n      });\n    }\n  }, {\n    key: \"onFormSubmit\",\n    value: function onFormSubmit(event) {\n      var _this3 = this;\n\n      var formatMessage = this.props.intl.formatMessage;\n      var message = '';\n\n      if (this.state.type === 'add') {\n        message = formatMessage({\n          id: \"balance.confirm\"\n        });\n      } else {\n        message = formatMessage({\n          id: \"balance.withdrawconfirm\"\n        });\n      }\n\n      event.preventDefault();\n\n      if (window.confirm(message + this.state.balance)) {\n        var body = JSON.stringify({\n          type: this.state.type,\n          username: this.state.data.username,\n          balance: this.state.balance\n        });\n        axios.post(API_URL + \"users/api/addorwithdrawbalance/\", body, config).then(function (res) {\n          if (res.data === 'Failed') {\n            _this3.setState({\n              error: true\n            });\n          } else if (res.data === 'The balance is not enough') {\n            alert(\"cannot withdraw this amount\");\n          } else {\n            _this3.props.history.push(\"/profile\");\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.onFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, this.state.type === 'add' ? React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"balance.enter_balance\",\n        defaultMessage: \"Please enter the amount you want to add to your account\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }))) : React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"balance.withdraw_balance\",\n        defaultMessage: \"Please enter the amount you want to withdraw from your account\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      })))), React.createElement(\"input\", {\n        placeholder: \"$50.00\",\n        className: \"form-control\",\n        value: this.state.balance,\n        onChange: this.onInputChange_balance,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      })), React.createElement(\"span\", {\n        className: \"input-group-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"balance.submit\",\n        defaultMessage: \"Submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      })))), React.createElement(\"button\", {\n        className: \"btn btn-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/\",\n        style: {\n          textDecoration: 'none'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(FormattedMessage, {\n        id: \"profile.back\",\n        defaultMessage: \"Back\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }), this.state.error && React.createElement(\"div\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \" \", React.createElement(FormattedMessage, {\n        id: \"balance.error\",\n        defaultMessage: \"The balance you entered is not valid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }), \" \"));\n    }\n  }]);\n\n  return Balance;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    language: state.language.lang\n  };\n};\n\nexport default injectIntl(connect(mapStateToProps)(Balance));","map":{"version":3,"sources":["/Users/samet/myproject/myproject/ibet-web/src/components/balance.js"],"names":["React","Component","FormattedMessage","injectIntl","NavLink","axios","config","connect","API_URL","process","env","REACT_APP_REST_API","Balance","props","state","balance","error","data","type","onInputChange_balance","bind","onFormSubmit","token","localStorage","getItem","headers","get","then","res","setState","match","params","event","target","value","formatMessage","intl","message","id","preventDefault","window","confirm","body","JSON","stringify","username","post","alert","history","push","textDecoration","color","mapStateToProps","language","lang"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport { NavLink} from 'react-router-dom';\nimport axios from 'axios';\nimport { config } from '../util_config';\nimport { connect } from 'react-redux';\n\nconst API_URL = process.env.REACT_APP_REST_API;\n\nclass Balance extends Component {\n    constructor(props){\n        super(props);\n    \n        this.state = {\n          balance: '',\n          error: false,\n          data: '',\n          type: '',\n        };\n\n        this.onInputChange_balance          = this.onInputChange_balance.bind(this);\n        this.onFormSubmit                   = this.onFormSubmit.bind(this);\n    }\n    \n    componentDidMount() {\n        const token = localStorage.getItem('token');\n        config.headers[\"Authorization\"] = `Token ${token}`;\n\n        axios.get(API_URL + 'users/api/user/', config)\n          .then(res => {\n            this.setState({data: res.data});\n          })\n        const { type } = this.props.match.params;\n        this.setState({type: type});\n\n    }\n\n    onInputChange_balance(event){\n        this.setState({balance: event.target.value}); \n    }\n\n    onFormSubmit(event){\n        const { formatMessage } = this.props.intl;\n        let message = '';\n        if (this.state.type === 'add') {\n            message = formatMessage({ id: \"balance.confirm\" });\n        } else {\n            message = formatMessage({ id: \"balance.withdrawconfirm\" });\n        }\n        \n        event.preventDefault();\n        if (window.confirm( message + this.state.balance)){\n            \n            const body = JSON.stringify({\n                type : this.state.type,\n                username: this.state.data.username,\n                balance: this.state.balance\n            });\n            axios.post(API_URL + `users/api/addorwithdrawbalance/`, body, config)\n            .then(res => {\n                if (res.data === 'Failed'){\n                    this.setState({error: true});\n                } else if (res.data === 'The balance is not enough') {\n                    alert(\"cannot withdraw this amount\")\n                } else {\n                    this.props.history.push(\"/profile\");\n                }\n            });\n        }\n    }\n\n    render(){\n        return (\n            <div>\n                <form onSubmit={this.onFormSubmit} >\n                    <div>\n                        <div>\n                            {this.state.type === 'add' ? \n                            <label><b>\n                                <FormattedMessage id='balance.enter_balance' defaultMessage='Please enter the amount you want to add to your account' />\n                            </b></label>\n                            :\n                            <label><b>\n                                <FormattedMessage id='balance.withdraw_balance' defaultMessage='Please enter the amount you want to withdraw from your account' />\n                            </b></label>\n                            }\n                            \n                        </div>\n                        <input\n                            placeholder=\"$50.00\"\n                            className=\"form-control\"\n                            value={this.state.balance}\n                            onChange={this.onInputChange_balance}\n                        />\n                    </div>\n\n                    <span className=\"input-group-btn\">\n                        <button type=\"submit\" className=\"btn btn-secondary\"> \n                            <FormattedMessage id=\"balance.submit\" defaultMessage='Submit' />   \n                        </button>\n                    </span>          \n\n                </form>\n                <button className=\"btn btn-secondary\"> \n                    <NavLink to='/' style={{ textDecoration: 'none' }}><FormattedMessage id=\"profile.back\" defaultMessage='Back' /></NavLink> \n                </button>\n                <br/>\n                {\n                    this.state.error && <div style = {{color: 'red'}}> <FormattedMessage  id=\"balance.error\" defaultMessage='The balance you entered is not valid' /> </div>\n                }\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        language: state.language.lang,\n    }\n}\n\nexport default injectIntl(connect(mapStateToProps)(Balance));"]},"metadata":{},"sourceType":"module"}